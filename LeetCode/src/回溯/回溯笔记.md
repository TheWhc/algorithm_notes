# 回溯法

## 1. 什么是回溯?

回溯法也叫回溯搜索法,是一种搜索的方式

## 2. 回溯法解决的问题

- 组合问题: N个数里面按一定规则找出k个数的集合
- 切割问题: 一个字符串按一定规则有几种切割方式
- 子集问题: 一个N个数的集合里有多少符合条件的子集
- 排列问题: N个数按一定规则全排列,有几种排列方式
- 棋盘问题: N皇后,解数独等等

> 组合是不强调元素顺序,排列强调**元素顺序**
> 例如: {1,2}和{2,1}在组合上,是一个集合。
>     对排列来说,  {1,2}和{2,1}就是两个集合了

## 3. 回溯法的模板

- 回溯函数模板返回值以及参数

  返回值一般为void，参数一开始不能一次性确定，所以一般先写逻辑，然后需要什么参数，就填充什么参数

  ```
  void backtrack(参数)
  ```

- 回溯函数终止条件

  一般来说搜到叶子节点，即找到满足条件的一条答案，就把答案存放起来，并结束本层递归。

  ```
  if (终止条件) {
  	存放结果;
  	return;
  }
  ```

- 回溯搜索的遍历过程

  回溯法一般是在集合中递归搜索，集合的大小构成了树的宽度，递归的深度构成树的深度

  ![image-20210618102913821](https://gitee.com/wu_hc/note_images/raw/master/img/20210618103327.png)

  ```
  for(选择:本层集合中元素(树中节点孩子的数量就是集合的大小)) {
  	处理节点;
  	backtrack(路径,选择列表); // 递归
  	回溯,撤销处理结果
  }
  ```

  for循环就是遍历集合区间,可以理解一个节点有多少孩子,for循环就执行多少次。

  （for循环横向遍历，backtrack纵向遍历）



综合，回溯算法模板如下：

```java
void backtrack(参数) {
    if (终止条件) {
        存放结果;
        return;
    }

    for (选择：本层集合中元素（树中节点孩子的数量就是集合的大小）) {
        处理节点;
        backtrack(路径，选择列表); // 递归
        回溯，撤销处理结果
    }
}
```

